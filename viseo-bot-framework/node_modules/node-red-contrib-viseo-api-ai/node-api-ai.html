<script type="text/javascript">
    RED.nodes.registerType('api-ai', {
        category: 'VISEO_NLP',
        color: '#3FADB5',
        defaults: {
            name:     { value: undefined },
            token:    { value: undefined },
            session:  { value: undefined },
            language: { value: undefined },
            text:     { value: undefined },
            intent:   { value: undefined },
        },
        inputs: 1,
        outputs: 1,
        icon: 'cloud.svg',
        align: 'left',
        paletteLabel: 'API.AI',
        label: function () { return this.name || 'API.AI' }
    });
</script>

<script type="text/x-red" data-template-name="api-ai">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="API.ai">
    </div>
    <div class="form-row">
        <label for="node-input-token"><i class="icon-tag"></i> Client Token</label>
        <input type="text" id="node-input-token" placeholder="000a0aaaa000000aa0000aaaa000aaa0">
    </div>
    <div class="form-row">
        <label for="node-input-session"><i class="icon-tag"></i> Session ID</label>
        <input type="text" id="node-input-session" placeholder="{user.id}">
    </div>
    <div class="form-row">
        <label for="node-input-language"><i class="icon-tag"></i> Language</label>
        <input type="text" id="node-input-language" placeholder="en">
    </div>
    <div class="form-row">
        <label for="node-input-text"><i class="icon-tag"></i> Text</label>
        <input type="text" id="node-input-text" placeholder="{payload}">
    </div>
    <div class="form-row">
        <label for="node-input-intent"><i class="icon-tag"></i> Intent</label>
        <input type="text" id="node-input-intent" placeholder="payload">
    </div>
</script>

<style>
    .help-section > h4,
    .help-section > h3 { font-weight: bold; }
</style>

<script type="text/x-red" data-help-name="api-ai">
    <section class="help-section">
        <h3>Help</h3>
        <h4>Name</h4>
        <p>Type in a name to override the node default name</p>
        <h4>Client token</h4>
        <p>
            Type in your client access token available on the API AI website, in the configuration page of the agent you want to use.
            <strong>DO NOT USE YOUR DEVELOPER ACCESS TOKEN.</strong>
        </p>
        <h4>Session ID</h4>
        <p>
            Type in the a session ID. The ID you choose will be hashed to ensure its unicity.
        </p>
        <h4>Language</h4>
        <p>
            Type in the language code you want to use with API AI.
            <a href="https://docs.api.ai/docs/languages">Here is The list of language codes recognized</a>
        </p>
        <h4>Text</h4>
        <p>
            Type in the text you want to be analized by API AI services. The text should be in the selected language.
        </p>
        <p>
            <strong>Text input external to the node</strong>
            If the text is between brackets, the node will resolve the string as a object path form the incoming data of the node.
        </p>
        <p>
            Example : Text: {var.text}
            The node will use the text contains in data.var.text
        </p>
    </section>
</script>